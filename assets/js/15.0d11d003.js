(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{376:function(t,e,s){"use strict";s.r(e);var a=s(45),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"development-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#development-guide"}},[t._v("#")]),t._v(" Development Guide")]),t._v(" "),s("h2",{attrs:{id:"pre-requisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisites"}},[t._v("#")]),t._v(" Pre-requisites")]),t._v(" "),s("p",[s("strong",[t._v("Access to Kubernetes cluster")])]),t._v(" "),s("p",[t._v("First of all, you will need access to a Kubernetes cluster. The easiest way to start is minikube.")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.virtualbox.org/wiki/Downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Virtualbox"),s("OutboundLink")],1),t._v(" - hypervisor to run a Kubernetes cluster")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kubernetes.io/docs/setup/minikube/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Minikube"),s("OutboundLink")],1),t._v(" - for Kubernetes cluster creation on local machine")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kubectl"),s("OutboundLink")],1),t._v(" - to interact with Kubernetes cluster")])]),t._v(" "),s("p",[s("strong",[t._v("Tools to build an Operator")])]),t._v(" "),s("p",[t._v("Apart from kubernetes cluster, there are some tools which are needed to build and test the redis operator.")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://golang.org/dl/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.docker.com/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/operator-framework/operator-sdk/blob/v0.8.1/doc/user/install-operator-sdk.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Operator SDK"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.gnu.org/software/make/manual/make.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Make"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"build"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[t._v("#")]),t._v(" Build")]),t._v(" "),s("p",[s("strong",[t._v("Build Locally")])]),t._v(" "),s("p",[t._v("To achieve this, execute this command:-")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" manager\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n/go/src/redis-operator/bin/controller-gen object:headerFile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hack/boilerplate.go.txt"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("paths")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./..."')]),t._v("\ngo "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fmt")]),t._v(" ./"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\ngo vet ./"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\ngo build -o bin/manager main.go\n")])])]),s("p",[s("strong",[t._v("Build Image")])]),t._v(" "),s("p",[t._v("Redis operator gets packaged as a container image for running on the Kubernetes cluster. These instructions will guide you to build an image.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" docker-build\n")])])]),s("h2",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),s("p",[t._v("If you want to play it on Kubernetes. You can use a minikube.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ minikube start --vm-driver virtualbox\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n😄  minikube v1.0.1 on linux "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n🤹  Downloading Kubernetes v1.14.1 images "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the background "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n🔥  Creating kvm2 VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CPUs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("2048MB, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Disk")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("20000MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n📶  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minikube"')]),t._v(" IP address is "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".39.240\n🐳  Configuring Docker as the container runtime "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n🐳  Version of container runtime is "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.06")]),t._v(".3-ce\n⌛  Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" image downloads to complete "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n✨  Preparing Kubernetes environment "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n🚜  Pulling images required by Kubernetes v1.14.1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n🚀  Launching Kubernetes v1.14.1 using kubeadm "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". \n⌛  Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" pods: apiserver proxy etcd scheduler controller dns\n🔑  Configuring cluster permissions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n🤔  Verifying component health "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n💗  kubectl is now configured to use "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minikube"')]),t._v("\n🏄  Done"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Thank you "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" using minikube"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Running Test Cases")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);